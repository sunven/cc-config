---
stepsCompleted: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
inputDocuments:
  - "docs/analysis/brainstorming-session-2025-12-05.md"
workflowType: 'prd'
lastStep: 11
project_name: 'cc-config'
user_name: 'Sunven'
completion_date: '2025-12-06'
date: '2025-12-06'
---

# Product Requirements Document - cc-config

**Author:** Sunven
**Date:** 2025-12-06

## 执行摘要

**产品愿景：**
Claude Code 配置可视化和管理工具旨在解决 Claude Code 用户在配置管理方面的核心痛点。我们创造了一个直观的空间隐喻系统（Tab = 作用域），让复杂的配置层级（用户级 → 项目级 → 本地级）变得清晰可见。

通过统一的能力面板展示 MCP 服务器和 Sub Agents，并提供配置来源追溯和继承关系可视化，这个工具将帮助开发者：
- 快速理解当前项目的可用能力和配置来源
- 消除配置作用域的混淆
- 获得运行时上下文的可见性
- 做出更明智的配置决策

**差异化特点：**
1. **Tab = 作用域的空间隐喻** - 首创的交互设计，将抽象的配置层级映射为直观的标签页系统
2. **三层继承链可视化** - 实时展示配置如何在 User → Project → Local 层级中继承和覆盖
3. **统一能力面板** - 将 MCP 和 Sub Agents 视为统一的"扩展能力"，提供一致的管理界面
4. **配置来源追溯** - 每个配置项都标注其来源（继承/项目级/本地级），提供完全的透明度
5. **智能模式切换** - 简单模式显示核心信息，高级模式展示完整继承链，满足不同用户需求

## 项目分类

**技术类型：** 开发者工具 (developer_tool)
**领域：** 一般软件 (general)
**复杂度：** 低 (low)

**项目分类说明：**
这是一个典型的开发者工具项目，服务于特定的开发者社区（Claude Code 用户）。项目采用成熟的 Electron + React + TypeScript 技术栈，不需要特殊的行业合规或监管要求。

作为开发者工具，我们关注：
- 简单明了的用户界面
- 准确的技术实现
- 良好的开发者体验
- 可扩展的架构设计

技术实现将遵循开发者工具的最佳实践，包括清晰的文档、示例配置和直观的交互设计。

## 成功标准

### 用户成功

**核心体验目标：**
- **首次理解时间：** < 5 分钟 - 新用户打开工具后，能在 5 分钟内全面理解自己的配置状况和可用能力
- **任务完成效率：** < 10 秒 - 用户能在 2-3 次点击内完成"查看当前项目所有可用 MCP 和 Agents"的核心任务
- **'aha!' 时刻：** 用户看到 Tab = 作用域的设计后，立即理解配置层级的概念，消除之前的混淆
- **问题解决确认：** 用户能够明确说出"现在我终于知道这个配置从哪里来的了"，并在遇到配置问题时能快速定位问题根源

**用户成功指标：**
- 用户能够自主操作，无需额外文档或帮助
- 配置来源追溯清晰，用户满意度高
- 继承关系可视化有效，降低认知负担
- 简单/高级模式切换满足不同用户需求

### 技术成功

**性能标准：**
- 应用启动时间：< 3 秒
- Tab 切换响应：< 100ms
- 配置文件变化检测：< 500ms
- 内存使用：< 200MB（正常操作）

**质量标准：**
- 零崩溃率（基本用例场景）
- 完善的错误处理和用户友好的错误提示
- 完整覆盖边界情况（缺失配置、权限错误等）
- 跨平台兼容性（macOS、Linux、Windows）

**用户体验技术标准：**
- 继承关系通过颜色和标注一目了然
- 界面元素布局合理，信息密度适中
- 交互反馈及时，操作结果清晰可见
- Tab 切换流畅，无视觉闪烁或延迟

### 可衡量成果

**MVP 验收标准：**
1. **功能完整性：** 100% 展示所有项目的 MCP 和 Agents 配置
2. **来源标注准确性：** 100% 准确标注配置来源（User/Project/Local）
3. **继承关系可视化：** 100% 准确显示三层继承链
4. **性能达标：** 所有性能指标达到上述标准
5. **零崩溃：** 在基本用例下实现零崩溃

**用户采用指标：**
- 工具被 Claude Code 用户社区认知和讨论
- GitHub repository 获得积极反馈和 stars
- 用户问题报告减少（证明可视化有效性）
- 开发者社区主动推荐和使用

## 产品范围

### MVP - 最小可行产品

**核心功能：**
- Tab 系统展示（用户级 + 项目级）
- MCP 服务器列表展示和来源标注
- Sub Agents 列表展示和来源标注
- 继承关系可视化（颜色编码）
- 配置文件监听和实时更新

**技术要求：**
- Electron + React + TypeScript 架构
- Zustand 状态管理
- chokidar 文件监听
- 跨平台支持（macOS 优先）

### 成长功能（MVP 后）

**增强功能：**
- 统一能力面板（MCP + Agents 整合）
- 简单/高级模式切换
- 项目状态指示（路径存在性检查）
- 配置详情展开功能
- 配置验证和错误提示

**优化功能：**
- 搜索和过滤功能
- 批量操作支持
- 配置导入/导出
- 键盘快捷键支持

### 愿景（未来）

**高级功能：**
- 配置编辑和管理功能
- 配置诊断工具（环境变量检查、冲突检测）
- 配置比较模式（并排对比不同项目）
- 配置索引视图（反向查询）
- 团队配置治理功能

**生态扩展：**
- 与 Claude Code 深度集成
- CLI 命令行工具
- VS Code 插件
- 企业级功能（团队配置审计）

## 用户旅程

**旅程 1: 李明 - 快速掌握项目配置**

**用户背景：**
李明是一名全栈开发工程师，今天开始为一个新项目工作。他需要在 Claude Code 中集成 Notion MCP 来管理项目文档，但他不确定当前项目已经配置了什么。

**当前情况：**
李明正为新项目设置 Claude Code，需要快速了解可用的 MCP 和 Agents。不确定哪些配置来自用户级，哪些来自项目级，继承关系混乱让他感到困扰。

**工具使用过程：**
打开 cc-config 工具后，李明立即看到了清晰的 Tab 界面：第一个标签是"用户级"，显示了他在所有项目中都可用的配置；第二个标签是当前项目"my-awesome-app"，显示了项目特定的配置。

他快速切换到项目标签，看到：
- ✅ **继承自用户级：** Notion MCP（来自用户级配置）
- ✅ **项目级配置：** GitHub MCP（专门为这个项目添加）
- ❌ **缺失：** 没有为这个项目配置 Memory MCP

**'aha!' 时刻：**
关键的"aha!"时刻来临：李明终于明白了配置继承的工作方式。他可以看到哪些能力是他默认拥有的（来自用户级），哪些是专门为这个项目添加的（项目级），哪些是他需要添加的（未配置）。

**问题解决：**
当他需要为项目添加新的 MCP 时，他可以直接在项目标签中进行配置，而不会影响其他项目的设置。通过简单的颜色编码，他可以立即知道每个配置的来源，避免了之前的配置混淆。

**成功结果：**
一周后，当团队成员王丽加入项目时，李明能够快速向她展示项目的配置状况。王丽打开工具后，立即理解了共享配置和个人配置的界限，避免了常见的配置冲突。李明的开发效率显著提升，团队协作更加顺畅。

### 旅程需求总结

**此旅程揭示的功能需求：**

1. **Tab 系统界面**
   - 清晰的 Tab 标签展示（用户级 + 项目级）
   - Tab 之间的流畅切换
   - 当前活跃 Tab 的视觉指示

2. **继承关系可视化**
   - 颜色编码区分配置来源（用户级/项目级/本地级）
   - 继承配置和覆盖配置的视觉区分
   - 继承链的透明展示

3. **配置来源标注**
   - 每个配置项明确标注来源
   - 配置创建位置的可追溯性
   - 继承状态的清晰标识

4. **跨项目配置对比**
   - 快速查看不同项目的配置差异
   - 共享配置和个人配置的清晰界限
   - 团队成员间的配置理解

5. **项目特定配置管理**
   - 在项目作用域内进行配置操作
   - 避免影响其他项目的配置
   - 项目级配置的独立管理

## 创新与新颖模式

### 检测到的创新领域

**1. Tab = 作用域的空间隐喻设计**
- **创新性质：** 首创将抽象的配置作用域映射为直观的标签页系统
- **差异化：** 挑战了配置管理必须是复杂的、需要大量文档的假设
- **独特价值：** 用户通过空间隐喻立即理解"当前查看的作用域"，无需额外解释

**2. 三层继承链可视化**
- **创新性质：** 让隐藏的、不可见的配置继承关系变得完全透明
- **差异化：** 现有工具通常只显示最终生效配置，不显示继承过程
- **独特价值：** 用户可以追溯每个配置的来源，理解默认值 → 用户级 → 项目级的完整路径

**3. 统一能力面板**
- **创新性质：** 将 MCP 服务器和 Sub Agents 视为统一的"扩展能力"类别
- **差异化：** 传统工具将不同类型的能力分开管理，增加认知负担
- **独特价值：** 用户获得项目能力的全景视图，无需在不同界面间切换

### 市场背景与竞争格局

**现有解决方案的局限性：**
- **配置文件管理工具：** 主要是文本编辑器或简单的 JSON/YAML 查看器，缺乏可视化
- **开发者配置工具：** 如 VS Code Settings，通常使用树形结构，作用域混淆
- **系统配置管理：** 如 Chef、Puppet，专注于服务器配置，不适用于开发者工具

**您的创新填补了市场空白：**
- 首次将空间隐喻应用于配置作用域的可视化
- 首个专门为 Claude Code 用户设计的配置理解工具
- 将复杂的继承关系简化为直观的视觉体验

### 验证方法

**主要验证方法：用户测试**
- **目标：** 观察用户是否立即理解 Tab = 作用域的概念
- **方法：**
  - 测试前：询问用户对配置作用域的理解程度
  - 测试中：记录用户首次使用工具时的反应和行为
  - 测试后：评估用户是否能够独立完成任务
- **成功标准：** 新用户在 5 分钟内理解配置状况（相比之前需要 30 分钟）

**补充验证：**
- **A/B 测试：** 与传统列表视图对比，理解时间和错误率
- **任务完成时间测量：** 从发现问题到定位原因的时间缩短
- **用户满意度调查：** 评估"aha!"时刻的出现频率

### 风险缓解

**主要风险：** 用户无法理解 Tab = 作用域的空间隐喻

**缓解策略：**

1. **备选视图模式**
   - 提供传统的列表视图作为选择
   - 用户可以在 Tab 视图和列表视图之间切换
   - 保持功能完整性，不牺牲核心价值

2. **引导和教程**
   - 首次启动时的交互式引导
   - 突出显示 Tab = 作用域的核心概念
   - 提供示例场景帮助理解

3. **渐进式信息披露**
   - 简单模式：仅显示核心信息
   - 高级模式：显示完整继承链和详细信息
   - 用户可以根据需要逐步深入

4. **快速回退机制**
   - 一键返回到熟悉的视图模式
   - 保留用户设置，避免重复配置
   - 错误恢复：清晰的操作反馈和撤销机制

**技术风险缓解：**
- **原型验证：** 在完整开发前创建高保真原型进行测试
- **分阶段发布：** 先发布核心功能，收集反馈后迭代
- **社区反馈：** 通过早期用户反馈快速迭代和优化

## 开发者工具特定需求

### 项目类型概述

cc-config 是一个专注于开发者体验的配置可视化工具，采用 Electron + React + TypeScript 技术栈。作为开发者工具，我们优先考虑开发者的工作流程，提供清晰的技术文档和扩展能力。

### 技术架构考虑

**核心架构：**
- **前端框架：** Electron + React + TypeScript
- **状态管理：** Zustand（轻量级，开发者友好）
- **文件系统监听：** chokidar（实时更新配置）
- **UI 框架：** Tailwind CSS（快速开发，一致的视觉风格）

**技术决策理由：**
- **Electron：** 提供完整的文件系统访问能力，避免浏览器沙盒限制
- **TypeScript：** 类型安全，减少运行时错误，提供更好的开发体验
- **Zustand：** 最小化的状态管理，避免过度工程化
- **React：** 成熟的生态系统，丰富的组件库

### 开发者文档需求

**目标受众：** 开发者希望扩展或修改工具功能的用户

**文档内容结构：**

1. **架构概述**
   - 代码结构说明（src/main、src/renderer、src/shared）
   - 核心模块解释（ConfigReader、FileWatcher、ConfigStore）
   - 数据流说明（文件读取 → 数据处理 → UI 更新）

2. **扩展指南**
   - 如何添加新的配置源支持
   - 如何自定义 UI 组件
   - 如何添加新的可视化模式

3. **API 参考**
   - 核心模块的 API 文档
   - 事件系统说明
   - 配置监听机制

4. **贡献指南**
   - 开发环境搭建
   - 代码风格和规范
   - Pull Request 流程

5. **迁移指南**
   - 从 v1.x 升级到 v2.x 的注意事项
   - 配置格式变更说明
   - API 废弃通知

### 安装和分发考虑

**分发渠道：**
- **直接下载：** 提供打包后的可执行文件（.dmg、.deb、.exe）
- **GitHub Releases：** 通过 GitHub 发布版本
- **未来考虑：** Homebrew、Cask（macOS），APT（Linux）

**安装要求：**
- 跨平台支持（macOS、Linux、Windows）
- 最小依赖：Node.js 运行时（Electron 打包后包含）
- 权限要求：读取用户主目录和项目目录的权限

### 代码示例和示例

**为开发者提供的示例：**

1. **基础配置读取示例**
   ```typescript
   import { readClaudeConfig } from './src/shared/configReader';

   const config = await readClaudeConfig();
   console.log('Projects:', Object.keys(config.projects));
   ```

2. **自定义配置监听**
   ```typescript
   import { watchConfigFiles } from './src/shared/fileWatcher';

   const watcher = watchConfigFiles(() => {
     console.log('Config files changed!');
   });
   ```

3. **扩展 UI 组件**
   ```typescript
   import { useConfigStore } from './src/store/configStore';

   const MyCustomComponent = () => {
     const { projects } = useConfigStore();
     return <div>{/* Custom rendering */}</div>;
   };
   ```

### 开发者工作流支持

**开发环境设置：**
- 完整的开发环境搭建指南
- 热重载支持（开发时实时更新）
- 调试配置（主进程和渲染进程）
- 测试环境配置

**工具链集成：**
- TypeScript 编译配置
- ESLint 和 Prettier 配置
- Jest 测试框架设置
- GitHub Actions CI/CD 配置

### 跳过部分（基于项目类型）

根据开发者工具的特点，以下部分在 PRD 中简化处理：
- **visual_design：** 具体视觉设计细节在产品设计阶段确定
- **ux_principles：** 用户体验原则已在用户旅程中定义
- **touch_interactions：** 桌面应用不涉及触摸交互

## 项目范围界定与分阶段开发

### MVP 策略与理念

**MVP 方法：** 问题解决 MVP
**资源要求：** 1-2 名开发者（小团队，精益开发）

**MVP 核心理念：**
专注于解决 Claude Code 用户的核心痛点（配置作用域混淆），用最少的特性实现最大价值。通过创新的 Tab = 作用域设计，让用户能够快速理解配置来源和继承关系。

**关键决策理由：**
- 解决真实问题：配置作用域混淆是用户的核心痛点
- 创新差异化：Tab = 作用域是独特的解决方案
- 快速验证：通过精益MVP快速验证市场需求
- 技术可行性：基于成熟技术栈，风险可控

### MVP 功能集（第一阶段）

**支持的核心用户旅程：**
- 李明 - 快速掌握项目配置（日常使用场景）

**必须具备的能力：**

1. **Tab 系统界面**
   - 用户级 Tab（固定第一个）
   - 项目级 Tab（动态生成）
   - Tab 之间的流畅切换
   - 当前活跃 Tab 的视觉指示
   - 零歧义的空间隐喻设计

2. **配置来源标注**
   - 每个配置项明确标注来源（User/Project/Local）
   - 颜色编码区分：蓝色（用户级）、绿色（项目级）、灰色（继承）
   - 继承配置的视觉区分（只读 + 覆盖提示）
   - 配置创建位置的可追溯性

3. **基础配置读取**
   - 读取 ~/.claude.json（用户级配置）
   - 读取项目 .mcp.json（项目级配置）
   - 读取项目 .claude/agents/*.md（Sub Agents）
   - 解析和显示 MCP 服务器列表
   - 解析和显示 Sub Agents 列表

4. **基本错误处理**
   - 配置文件不存在时的友好提示
   - 权限错误的清晰说明
   - 基本的重试机制

**技术实现要求：**
- Electron + React + TypeScript
- Zustand 状态管理
- 跨平台支持（macOS 优先）
- 基础 UI（无需复杂设计）

### 第二阶段功能（增长期）

**用户价值增强：**

1. **统一能力面板**
   - MCP 和 Sub Agents 整合展示
   - 统一的"扩展能力"分类
   - 能力统计和概览

2. **简单/高级模式切换**
   - 简单模式：仅显示核心信息
   - 高级模式：显示完整继承链
   - 用户可自由切换模式

3. **项目状态指示**
   - 路径存在性检查
   - 项目最后使用时间
   - 配置统计（MCP/Agents 数量）

4. **文件监听和实时更新**
   - chokidar 监听配置文件变化
   - 自动更新界面（可选手动刷新按钮）
   - 实时同步配置变更

### 第三阶段功能（扩展期）

**高级能力：**

1. **配置编辑和管理**
   - 直接在工具中编辑配置
   - 配置的添加、删除、修改
   - 配置验证和错误检查

2. **跨项目配置对比**
   - 并排显示不同项目的配置
   - 配置差异高亮
   - 批量操作支持

3. **配置诊断工具**
   - 环境变量检查
   - 配置冲突检测
   - 问题定位和修复建议

4. **生态扩展**
   - VS Code 插件
   - CLI 工具
   - 与 Claude Code 深度集成

### 风险缓解策略

**技术风险：** Tab = 作用域的空间隐喻可能难以理解
- **缓解方法：** 提供传统的列表视图作为备选选项
- **验证方法：** 原型测试 + 用户反馈
- **回退方案：** 如果创新不成功，可完全切换到列表视图

**市场风险：** 用户可能不需要配置可视化工具
- **缓解方法：** 最小化开发成本，快速验证
- **验证方法：** 先发布最小可用版本，收集用户反馈
- **学习路径：** 通过早期采用者了解真实需求

**资源风险：** 开发资源可能不足
- **缓解方法：** 精益MVP设计，最小功能集
- **备选方案：** 开源发布，社区贡献
- **团队规模：** 1-2 名开发者即可启动

**竞争风险：** 现有工具可能添加类似功能
- **缓解方法：** 快速迭代，建立用户基础
- **差异化：** 独特的 Tab = 作用域设计
- **护城河：** 用户体验和开发者生态


## 功能需求

### 配置作用域展示

- FR1: 开发者可以查看用户级配置作用域
- FR2: 开发者可以查看项目级配置作用域
- FR3: 开发者可以在不同作用域之间切换
- FR4: 系统可以显示当前激活的作用域
- FR5: 开发者可以快速识别当前查看的是哪个作用域

### 配置来源识别

- FR6: 开发者可以识别每个配置项的来源（User/Project/Local）
- FR7: 系统可以用颜色编码区分不同来源的配置
- FR8: 开发者可以区分继承的配置和覆盖的配置
- FR9: 系统可以显示配置的完整继承路径
- FR10: 开发者可以追溯每个配置的创建位置

### MCP服务器管理

- FR11: 开发者可以查看可用的MCP服务器列表
- FR12: 开发者可以查看每个MCP服务器的类型和配置
- FR13: 开发者可以识别哪些MCP服务器是继承的
- FR14: 开发者可以识别哪些MCP服务器是项目特定的
- FR15: 系统可以显示MCP服务器的配置详情

### Sub Agents管理

- FR16: 开发者可以查看可用的Sub Agents列表
- FR17: 开发者可以查看每个Agent的描述和配置
- FR18: 开发者可以识别哪些Agents是继承的
- FR19: 开发者可以识别哪些Agents是项目特定的
- FR20: 系统可以显示Agent的权限模式和模型配置

### 跨项目配置对比

- FR21: 开发者可以查看所有已配置的项目列表
- FR22: 开发者可以切换到不同项目的配置视图
- FR23: 开发者可以对比不同项目的配置差异
- FR24: 系统可以显示项目配置的状态（存在/不存在）
- FR25: 开发者可以快速了解每个项目的配置概况

### 系统集成与文件读取

- FR26: 系统可以读取用户主目录的配置文件
- FR27: 系统可以读取项目目录的配置文件
- FR28: 系统可以解析JSON格式的配置文件
- FR29: 系统可以解析Markdown格式的Agent文件
- FR30: 系统可以处理配置文件不存在的情况
- FR31: 系统可以处理权限错误的情况

### 错误处理与反馈

- FR32: 系统可以检测并报告配置文件缺失错误
- FR33: 系统可以检测并报告权限不足错误
- FR34: 系统可以提供清晰的错误信息和解决建议
- FR35: 系统可以优雅地处理无效配置文件格式
- FR36: 开发者可以重试失败的操作

### 用户体验与界面

- FR37: 开发者可以在5分钟内理解配置状况
- FR38: 开发者可以在10秒内完成查看配置的任务
- FR39: 系统可以提供直观的空间隐喻界面
- FR40: 系统可以让开发者无需文档即可理解界面
- FR41: 开发者可以获得"aha!"时刻的体验

### 项目信息与管理

- FR42: 系统可以显示项目的最后使用时间
- FR43: 系统可以显示每个项目的配置统计
- FR44: 开发者可以查看项目的元数据信息
- FR45: 系统可以验证项目路径的存在性
- FR46: 开发者可以快速筛选和查找项目



## 非功能需求

### 性能

**启动性能：**
- 应用程序启动时间：< 3秒（在典型硬件上）
- 从启动到显示首个Tab的时间：< 2秒

**交互性能：**
- Tab切换响应时间：< 100ms
- 配置文件变化检测延迟：< 500ms
- 界面渲染时间：< 50ms（每次状态更新）

**资源使用：**
- 内存使用（正常运行）：< 200MB
- CPU使用率（空闲状态）：< 1%
- 磁盘空间占用：< 100MB（不包括Electron运行时）

### 可靠性

**稳定性：**
- 应用程序崩溃率：0%（基本用例场景）
- 无数据丢失或损坏
- 配置文件读取失败时的优雅降级

**错误处理：**
- 配置文件不存在的错误：提供清晰的错误信息和解决建议
- 权限错误：提供明确的权限请求说明
- 无效配置文件格式：提供解析错误详情和修复建议

**可用性：**
- 新用户理解时间：< 5分钟
- 核心任务完成时间：< 10秒
- 继承关系可见性：一目了然，无需额外文档
- 操作反馈：所有用户操作都有清晰的视觉反馈

